(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){function n(t,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e(this,"_autoplay",(function(t){if(this._config.autoplay)return"stop"===t?(clearInterval(this._intervalId),void(this._intervalId=null)):void(null===this._intervalId&&(this._intervalId=setInterval(function(){this._direction="next",this._move()}.bind(this),this._config.interval)))})),this._el="string"==typeof t?document.querySelector(t):t,this._elWrapper=this._el.querySelector(n.SELECTOR_WRAPPER),this._elItems=this._el.querySelector(n.SELECTOR_ITEMS),this._elsItem=this._el.querySelectorAll(n.SELECTOR_ITEM),this._currentIndex=0,this._minOrder=0,this._maxOrder=0,this._$itemWithMinOrder=null,this._$itemWithMaxOrder=null,this._minTranslate=0,this._maxTranslate=0,this._direction="next",this._balancingItemsFlag=!1,this._transform=0,this._width=this._elWrapper.getBoundingClientRect().width,this._supportResizeObserver=void 0!==window.ResizeObserver,this._hasSwipeState=!1,this._swipeStartPosX=0,this._intervalId=null,this._config=Object.assign({autoplay:!1,loop:!0,indicators:!0,interval:3e3,swipe:!0},i),this._elItems.dataset.translate=0,this._elsItem.forEach((function(t,e){t.dataset.order=e,t.dataset.index=e,t.dataset.translate=0})),this._config.loop){var r=this._elsItem.length-1,s=-this._elsItem.length;this._elsItem[r].dataset.order=-1,this._elsItem[r].dataset.translate=-this._elsItem.length;var a=s*this._width;this._elsItem[r].style.transform="translateX("+a+"px)"}this._addIndicators(),this._refreshExtremeValues(),this._setActiveClass(),this._addEventListener(),this._autoplay()}var i,r;return i=n,(r=[{key:"_setActiveClass",value:function(){var t=this._el.querySelector(n.SELECTOR_ITEM_ACTIVE);t&&t.classList.remove(n.CLASS_NAME_ITEM_ACTIVE);var e=this._el.querySelector('[data-index="'.concat(this._currentIndex,'"]'));e&&e.classList.add(n.CLASS_NAME_ITEM_ACTIVE);var i=this._el.querySelector(n.SELECTOR_INDICATOR_ACTIVE);i&&i.classList.remove(n.CLASS_NAME_INDICATOR_ACTIVE);var r=this._el.querySelector('[data-slide-to="'.concat(this._currentIndex,'"]'));r&&r.classList.add(n.CLASS_NAME_INDICATOR_ACTIVE);var s=this._el.querySelector(n.SELECTOR_CONTROL_PREV),a=this._el.querySelector(n.SELECTOR_CONTROL_NEXT);s&&s.classList.add(n.CLASS_NAME_CONTROL_SHOW),a&&a.classList.add(n.CLASS_NAME_CONTROL_SHOW),this._config.loop||0!==this._currentIndex?this._config.loop||this._currentIndex!==this._elsItem.length-1||a.classList.remove(n.CLASS_NAME_CONTROL_SHOW):s.classList.remove(n.CLASS_NAME_CONTROL_SHOW),this._el.dispatchEvent(new CustomEvent("active.itc.slider",{bubbles:!0}))}},{key:"_move",value:function(t){var e;if(this._elItems.classList.remove(n.TRANSITION_NONE),!1===t&&this._elItems.classList.add(n.TRANSITION_NONE),"none"===this._direction)return e=this._transform*this._width,void(this._elItems.style.transform="translateX("+e+"px)");if(!this._config.loop){if(this._currentIndex+1>=this._elsItem.length&&"next"===this._direction)return void this._autoplay("stop");if(this._currentIndex<=0&&"prev"===this._direction)return}var i="next"===this._direction?-1:1,r=this._transform+i;"next"===this._direction?++this._currentIndex>this._elsItem.length-1&&(this._currentIndex-=this._elsItem.length):--this._currentIndex<0&&(this._currentIndex+=this._elsItem.length),this._transform=r,this._elItems.dataset.translate=r,e=r*this._width,this._elItems.style.transform="translateX("+e+"px)",this._elItems.dispatchEvent(new CustomEvent("transition-start",{bubbles:!0})),this._setActiveClass()}},{key:"_moveTo",value:function(t,e){var n=this._currentIndex;this._direction=t>n?"next":"prev";for(var i=0;i<Math.abs(t-n);i++)this._move(e)}},{key:"_addIndicators",value:function(){if(!this._el.querySelector(n.SELECTOR_INDICATORS)&&this._config.indicators){for(var t="",e=0,i=this._elsItem.length;e<i;e++)t+='<li class="'.concat(n.CLASS_NAME_INDICATOR,'" data-slide-to="').concat(e,'"></li>');this._el.insertAdjacentHTML("beforeend",'<ol class="'.concat(n.CLASS_NAME_INDICATORS,'">').concat(t,"</ol>"))}}},{key:"_refreshExtremeValues",value:function(){this._minOrder=parseInt(this._elsItem[0].dataset.order),this._maxOrder=this._minOrder,this._$itemWithMinOrder=this._elsItem[0],this._$itemWithMaxOrder=this._$itemWithMinOrder,this._minTranslate=parseInt(this._elsItem[0].dataset.translate),this._maxTranslate=this._minTranslate;for(var t=0,e=this._elsItem.length;t<e;t++){var n=this._elsItem[t],i=parseInt(n.dataset.order);i<this._minOrder?(this._minOrder=i,this._$itemWithMinOrder=n,this._minTranslate=parseInt(n.dataset.translate)):i>this._maxOrder&&(this._maxOrder=i,this._$itemWithMaxOrder=n,this._maxTranslate=parseInt(n.dataset.translate))}}},{key:"_balancingItems",value:function(){if(this._balancingItemsFlag){var t,e,n=this._elWrapper.getBoundingClientRect(),i=n.width/2,r=this._elsItem.length;if("next"===this._direction){var s=n.left,a=this._$itemWithMinOrder;t=this._minTranslate,a.getBoundingClientRect().right<s-i&&(a.dataset.order=this._minOrder+r,t+=r,a.dataset.translate=t,e=t*this._width,a.style.transform="translateX("+e+"px)",this._refreshExtremeValues())}else if("prev"===this._direction){var o=n.right,l=this._$itemWithMaxOrder;t=this._maxTranslate,l.getBoundingClientRect().left>o+i&&(l.dataset.order=this._maxOrder-r,t-=r,l.dataset.translate=t,e=t*this._width,l.style.transform="translateX("+e+"px)",this._refreshExtremeValues())}requestAnimationFrame(this._balancingItems.bind(this))}}},{key:"_addEventListener",value:function(){var t=this._elItems;function e(t){if(this._autoplay("stop"),!t.target.closest(n.CLASS_NAME_CONTROL)){var e=0===t.type.search("touch")?t.touches[0]:t;this._swipeStartPosX=e.clientX,this._swipeStartPosY=e.clientY,this._hasSwipeState=!0,this._hasSwiping=!1}}function i(t){if(this._hasSwipeState){var e=0===t.type.search("touch")?t.touches[0]:t,i=this._swipeStartPosX-e.clientX,r=this._swipeStartPosY-e.clientY;if(!this._hasSwiping){if(Math.abs(r)>Math.abs(i)||0===Math.abs(i))return void(this._hasSwipeState=!1);this._hasSwiping=!0}t.preventDefault(),this._config.loop||(this._currentIndex+1>=this._elsItem.length&&i>=0&&(i/=4),this._currentIndex<=0&&i<=0&&(i/=4));var s=i/this._elWrapper.getBoundingClientRect().width,a=this._transform-s;this._elItems.classList.add(n.TRANSITION_NONE),a*=this._width,this._elItems.style.transform="translateX("+a+"px)"}}function r(t){if(this._hasSwipeState){var e=0===t.type.search("touch")?t.changedTouches[0]:t,i=this._swipeStartPosX-e.clientX;if(0!==i){this._config.loop||(this._currentIndex+1>=this._elsItem.length&&i>=0&&(i/=7),this._currentIndex<=0&&i<=0&&(i/=7));var r=i/this._elWrapper.getBoundingClientRect().width*100;this._elItems.classList.remove(n.TRANSITION_NONE),r>n.SWIPE_THRESHOLD?(this._direction="next",this._move()):r<-n.SWIPE_THRESHOLD?(this._direction="prev",this._move()):(this._direction="none",this._move()),this._hasSwipeState=!1,this._config.loop&&this._autoplay()}else this._hasSwipeState=!1}}if(this._el.addEventListener("click",function(t){var e=t.target;if(this._autoplay("stop"),e.classList.contains(n.CLASS_NAME_CONTROL))t.preventDefault(),this._direction=e.dataset.slide,this._move();else if(e.dataset.slideTo){t.preventDefault();var i=parseInt(e.dataset.slideTo);this._moveTo(i)}this._config.loop&&this._autoplay()}.bind(this)),this._config.loop&&(t.addEventListener("transition-start",function(){this._balancingItemsFlag||(this._balancingItemsFlag=!0,window.requestAnimationFrame(this._balancingItems.bind(this)))}.bind(this)),t.addEventListener("transitionend",function(){this._balancingItemsFlag=!1,this._el.dispatchEvent(new CustomEvent("transition-end",{bubbles:!0}))}.bind(this))),this._config.autoplay&&(this._el.addEventListener("mouseenter",function(){this._autoplay("stop")}.bind(this)),this._el.addEventListener("mouseleave",function(){this._config.loop&&this._autoplay()}.bind(this))),this._config.swipe){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveListener",null,a)}catch(t){}this._el.addEventListener("touchstart",e.bind(this),!!s&&{passive:!1}),this._el.addEventListener("touchmove",i.bind(this),!!s&&{passive:!1}),this._el.addEventListener("mousedown",e.bind(this)),this._el.addEventListener("mousemove",i.bind(this)),document.addEventListener("touchend",r.bind(this)),document.addEventListener("mouseup",r.bind(this)),document.addEventListener("mouseout",r.bind(this))}if(this._el.addEventListener("dragstart",function(t){t.preventDefault()}.bind(this)),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?this._autoplay("stop"):"visible"===document.visibilityState&&this._config.loop&&this._autoplay()}.bind(this)),this._supportResizeObserver){var o=new ResizeObserver(function(t){var e,i=t[0].contentBoxSize,r=t[0].contentRect,s=r?r.width:(i[0]||i).inlineSize;if(this._width.toFixed(1)!==s.toFixed(1)){this._autoplay("stop"),this._elItems.classList.add(n.TRANSITION_NONE),this._width=parseInt(s.toFixed(1),10),e=s*parseInt(this._elItems.dataset.translate,10),this._elItems.style.transform="translateX("+e+"px)";for(var a=this._elsItem,o=0;o<a.length;o++)e=parseInt(a[o].dataset.translate)*s,a[o].style.transform="translateX("+e+"px)";this._config.loop&&this._autoplay()}}.bind(this));o.observe(this._elWrapper)}}},{key:"next",value:function(){this._direction="next",this._move()}},{key:"prev",value:function(){this._direction="prev",this._move()}},{key:"autoplay",value:function(t){this._autoplay("stop")}},{key:"moveTo",value:function(t,e){this._moveTo(t,e)}}])&&t(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),n}();function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}e(n,"PREFIX","slider"),e(n,"CLASS_NAME_ITEM","".concat(n.PREFIX,"__item")),e(n,"CLASS_NAME_ITEM_ACTIVE","".concat(n.PREFIX,"__item_active")),e(n,"CLASS_NAME_ITEMS","".concat(n.PREFIX,"__items")),e(n,"CLASS_NAME_INDICATOR","".concat(n.PREFIX,"__indicator")),e(n,"CLASS_NAME_INDICATOR_ACTIVE","".concat(n.PREFIX,"__indicator_active")),e(n,"CLASS_NAME_INDICATORS","".concat(n.PREFIX,"__indicators")),e(n,"CLASS_NAME_CONTROL","".concat(n.PREFIX,"__control")),e(n,"CLASS_NAME_CONTROL_PREV","".concat(n.PREFIX,"__control_prev")),e(n,"CLASS_NAME_CONTROL_NEXT","".concat(n.PREFIX,"__control_next")),e(n,"CLASS_NAME_CONTROL_SHOW","".concat(n.PREFIX,"__control_show")),e(n,"SELECTOR_ITEMS",".".concat(n.CLASS_NAME_ITEMS)),e(n,"SELECTOR_ITEM",".".concat(n.CLASS_NAME_ITEM)),e(n,"SELECTOR_ITEM_ACTIVE",".".concat(n.CLASS_NAME_ITEM_ACTIVE)),e(n,"SELECTOR_INDICATOR_ACTIVE",".".concat(n.CLASS_NAME_INDICATOR_ACTIVE)),e(n,"SELECTOR_INDICATORS",".".concat(n.CLASS_NAME_INDICATORS)),e(n,"SELECTOR_WRAPPER",".".concat(n.PREFIX,"__wrapper")),e(n,"SELECTOR_CONTROL",".".concat(n.CLASS_NAME_CONTROL)),e(n,"SELECTOR_CONTROL_NEXT",".".concat(n.CLASS_NAME_CONTROL_NEXT)),e(n,"SELECTOR_CONTROL_PREV",".".concat(n.CLASS_NAME_CONTROL_PREV)),e(n,"SWIPE_THRESHOLD",20),e(n,"TRANSITION_NONE","transition-none");var r=function(){function t(e,n){var i=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=i,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderCards",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.append(t)}},{key:"updateCards",value:function(t){this._container.innerHTML="",this.renderCards(t)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),s=(document.querySelector(".carousel"),".card-template");function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,l,c,h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=e.title,this._text=e.description,this._author=e.author,this._date=e.publishedAt,this._selector=n}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"_changeMonth",value:function(e){return t.MONTH[e-1]}},{key:"_exchangeDate",value:function(t){var e=t.substr(0,10).split("-"),n=this._changeMonth(Number(e[1]));return"".concat(e[2]," ").concat(n," ").concat(e[0])}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".card__title").textContent=this._title,this._element.querySelector(".card__text").textContent=this._text,this._element.querySelector(".card__author").textContent=this._author,this._element.querySelector(".card__date").textContent=this._exchangeDate(this._date),this._element}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}c=["яиваря","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],(l="MONTH")in(o=h)?Object.defineProperty(o,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[l]=c;var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url,this.headers=e.headers}var e,n;return e=t,(n=[{key:"getCards",value:function(){return fetch(this.url,{headers:this.headers}).then(this._checkPromise)}},{key:"_checkPromise",value:function(t){return t.ok||Promise.reject("Error ".concat(t.status)),t.json()}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"setCards",value:function(e){var n,i=e.map((function(t){return null===t.author?t=p(p({},t),{},{author:"Unknown"}):t}));t.CARDS=i,t.LIST_AUTHOR=function(t){if(Array.isArray(t))return d(t)}(n=new Set(i.map((function(t){return t.author}))))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},{key:"getCards",value:function(){return t.CARDS}},{key:"getAuthors",value:function(){return t.LIST_AUTHOR}},{key:"defineAuthor",value:function(e){return"All"===e?t.CARDS:t.CARDS.filter((function(t){return t.author===e}))}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}m(E,"CARDS",[]),m(E,"LIST_AUTHOR",[]);var I=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._selectEl=document.querySelector(e),this._handleChange=n}var e,n;return e=t,(n=[{key:"initialzeSelect",value:function(t){var e=this;t.forEach((function(t){return e._option=document.createElement("option"),e._option.value=t,e._option.innerText=t,e._selectEl.append(e._option)})),this._setEventListener(this._selectEl)}},{key:"_setEventListener",value:function(t){t.onchange=this._handleChange}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),O=new Date;O.getFullYear(),O.getMonth(),O.getDate(),document.addEventListener("DOMContentLoaded",(function(){new n(".slider",{loop:!0,autoplay:!0,interval:3e3,swipe:!0})}));var y=new E,C=function(t){alert("Всё идёт не по плану. ".concat(t.status))},b=new u({url:"https://mocki.io/v1/a5814d24-4e22-49fc-96d1-0e9ae2952afc",headers:{"Content-Type":"application/json"}}),T=new r({renderer:function(t){!function(t){var e=new h(t,s).generateCard();T.addItem(e)}(t)}},".cards__list");function A(t){t.preventDefault();var e=y.defineAuthor(t.target.value);T.updateCards(e)}Promise.all([b.getCards().then((function(t){return t})).catch(C)]).then((function(t){var e=t.map((function(t){return t.articles}))[0];y.setCards(e)})).then((function(){return T.renderCards(y.getCards())})).then((function(){new I(".form__select_author",A).initialzeSelect(y.getAuthors())})).catch(C)})();